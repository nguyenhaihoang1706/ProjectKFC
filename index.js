const newProduct = [
  {
    id: 1,
    img: "./assets/image/newproduct/1.jpeg",
    name: "1 Golden Egg Chicken",
    price: 41000,
    decription: "1 Golden Egg Chicken",
    group: "New-Product",
  },
  {
    id: 2,
    img: "./assets/image/newproduct/1.jpeg",
    name: "2 Golden Egg Chicken",
    price: 79000,
    decription: "2 Golden Egg Chicken",
    group: "New-Product",
  },
  {
    id: 3,
    img: "./assets/image/newproduct/1.jpeg",
    name: "3 Golden Egg Chicken",
    price: 117000,
    decription: "1 Golden Egg Chicken",
    group: "New-Product",
  },
  {
    id: 4,
    img: "./assets/image/newproduct/1.jpeg",
    name: "6 Golden Egg Chicken",
    price: 231000,
    decription: "6 Golden Egg Chicken",
    group: "New-Product",
  },
  {
    id: 5,
    img: "./assets/image/newproduct/1.jpeg",
    name: "Ga Oc Que",
    price: 45000,
    decription: "Ga Oc Que",
    group: "Combo-for-1",
  },
  {
    id: 6,
    img: "./assets/image/newproduct/1.jpeg",
    name: "Ga Oc Que A",
    price: 78000,
    decription: "01 Ga Oc Que + 04 Nuggets",
    group: "Combo-for-1",
  },
  {
    id: 7,
    img: "./assets/image/combo for 1/D1-new.jpeg",
    name: "Combo Fried Chicken",
    price: 89000,
    decription: "2 Fried Chicken + 1 FF (R) /2 Nuggets + 1 Lipton Regular",
    group: "Combo-for-1",
  },
  {
    id: 8,
    img: "./assets/image/combo for 1/D2-new.jpeg",
    name: "Combo Spaghetti",
    price: 89000,
    decription:
      "1 Spaghetti with Tomato Sauce and Popcorn + 1 Fried Chicken/2 Tenderods + 1 Pepsi",
    group: "Combo-for-1",
  },
  {
    id: 9,
    img: "./assets/image/combo for 1/D4-new.jpeg",
    name: "D4 CBO Salad",
    price: 79000,
    decription: "1 Fried Chicken + 1 Salad Hat + 1 Pepsi Can",
    group: "Combo-for-1",
  },
  {
    id: 10,
    img: "./assets/image/combo for 1/D5.jpeg",
    name: "Combo Burger",
    price: 91000,
    decription:
      "1 Burger Zinger/ Burger Flava/ Burger Shrimp + 1 Fried Chicken + 1 Pepsi Can",
    group: "Combo-for-sharing",
  },
  {
    id: 11,
    img: "./assets/image/comboForSharing/CFS1.jpeg",
    name: "Combo For Group 1",
    price: 175000,
    decription: "3 Fried Chicken + 1 Burger Shrimp + 2 Pepsi Can",
    group: "Combo-for-sharing",
  },
  {
    id: 12,
    img: "./assets/image/comboForSharing/CFS2.jpeg",
    name: "Combo Burger",
    price: 195000,
    decription: "4 Fried Chicken + 2 Pumcheese + 2 Pepsi Can",
    group: "Combo-for-sharing",
  },
  {
    id: 13,
    img: "./assets/image/comboForSharing/CFS3.jpeg",
    name: "Combo For Group 3",
    price: 232000,
    decription: "5 Fried Chicken + 1 Pop R /4 Nuggets + 2 Pepsi Can",
    group: "Combo-for-sharing",
  },
  {
    id: 14,
    img: "./assets/image/fried/1-Fried-Chicken.jpeg",
    name: "1 Fried Chicken ",
    price: 36000,
    decription:
      "1 Hot & Spicy Chicken/Original Recipe Chicken/Non Spicy Crispy Chicken",
    group: "Fried",
  },
  {
    id: 15,
    img: "./assets/image/fried/2-Fried-Chicken.jpeg",
    name: "2 Fried Chicken ",
    price: 71000,
    decription:
      "2 Hot & Spicy Chicken/Original Recipe Chicken/Non Spicy Crispy Chicken",
    group: "Fried",
  },
  {
    id: 16,
    img: "./assets/image/fried/3-Fried-Chicken.jpeg",
    name: "3 Fried Chicken ",
    price: 105000,
    decription:
      "3 Hot & Spicy Chicken/Original Recipe Chicken/Non Spicy Crispy Chicken",
    group: "Fried",
  },
  {
    id: 17,
    img: "./assets/image/fried/6-Fried-Chicken-new.jpeg",
    name: "6 Fried Chicken ",
    price: 205000,
    decription:
      "6 Hot & Spicy Chicken/Original Recipe Chicken/Non Spicy Crispy Chicken",
    group: "Fried",
  },
  {
    id: 18,
    img: "./assets/image/fried/BJ.jpeg",
    name: "1 Roasted Chicken Leg Quarter  ",
    price: 75000,
    decription:
      "1 Leg Quarter of Big’n Juicy / 1 Leg Quarter of Black Pepper Foilicious",
    group: "Fried",
  },
  {
    id: 19,
    img: "./assets/image/fried//MOD-PHI-LE-GA-QUAY.jpeg",
    name: "1 Roasted Fillet  ",
    price: 39000,
    decription: "1 Flava Roast Fillet / 1 Pc Black Pepper Fillet",
    group: "Fried",
  },
  {
    id: 20,
    img: "./assets/image/fried/3-HW.jpeg",
    name: "Hot Wings 3 Pcs  ",
    price: 55000,
    decription: "Hot Wings 3 Pcs",
    group: "Fried",
  },
  {
    id: 21,
    img: "./assets/image/fried/5-HW.jpeg",
    name: "Hot Wings 5 Pcs  ",
    price: 85000,
    decription: "  Hot Wings 5 Pcs ",
    group: "Fried",
  },
  {
    id: 22,
    img: "./assets/image/fried/POP-R.jpeg",
    name: "Popcorn (R)",
    price: 39000,
    decription: "  Popcorn (R) ",
    group: "Fried & Roasted ",
  },
  {
    id: 23,
    img: "./assets/image/fried/POP-L.jpeg",
    name: "Popcorn(L) ",
    price: 64000,
    decription: "  Popcorn (L) ",
    group: "Fried",
  },
  {
    id: 24,
    img: "./assets/image/fried/3_Nuggests.jpeg",
    name: " 3 Pcs KFC Nuggets ",
    price: 27000,
    decription: " 3 Pcs KFC Nuggets ",
    group: "Fried",
  },
  {
    id: 25,
    img: "./assets/image/fried/5_Nuggests.jpeg",
    name: " 5 Pcs KFC Nuggets ",
    price: 41000,
    decription: " 5 Pcs KFC Nuggets ",
    group: "Fried",
  },
  {
    id: 26,
    img: "./assets/image/rice/Burger-Zinger.jpeg",
    name: " 1 Burger Zinger",
    price: 55000,
    decription: " 1 Burger Zinger",
    group: "Rice",
  },
  {
    id: 27,
    img: "./assets/image/rice/Burger-Shrimp.jpeg",
    name: "  Burger Shrimp ",
    price: 45000,
    decription: " 1 Burger Shrimp ",
    group: "Rice",
  },
  {
    id: 28,
    img: "./assets/image/rice/Burger-Flava.jpeg",
    name: " Burger Flava  ",
    price: 55000,
    decription: " 1 Burger Flava  ",
    group: "Rice",
  },
  {
    id: 29,
    img: "./assets/image/rice/Rice-Skewer.jpeg",
    name: " Skewer Rice  ",
    price: 46000,
    decription: " 1 Skewer Rice ",
    group: "Rice",
  },
  {
    id: 30,
    img: "./assets/image/rice/Rice-TENDERODS.jpeg",
    name: " Tenderods Rice  ",
    price: 55000,
    decription: " Tenderods Rice  ",
    group: "Rice - Burger - Pasta ",
  },
  {
    id: 31,
    img: "./assets/image/rice/Rice-Steak.jpeg",
    name: " Steak Rice ",
    price: 55000,
    decription: "Steak Rice ",
    group: "Rice",
  },
  {
    id: 32,
    img: "./assets/image/rice/MY-Y-POP.jpeg",
    name: " Spaghetti with Tomato Sauce and Popcorn ",
    price: 55000,
    decription: " 1 Spaghetti with Tomato Sauce and Popcorn ",
    group: "Rice",
  },
  {
    id: 33,
    img: "./assets/image/rice/Rice-F.Chicken.jpg",
    name: "  Fried Chicken Rice  ",
    price: 55000,
    decription: " 1  Fried Chicken Rice  ",
    group: "Rice",
  },
  {
    id: 34,
    img: "./assets/image/snack/SALAD-HAT.jpeg",
    name: "  Salad Hat ",
    price: 36000,
    decription: " 1 Salad Hat ",
    group: "Snack",
  },
  {
    id: 35,
    img: "./assets/image/snack/SALAD-HAT-GA-VIEN.jpeg",
    name: "  Salad Pop ",
    price: 36000,
    decription: " 1 Salad Popcorn",
    group: "Snack",
  },
  {
    id: 36,
    img: "./assets/image/snack/3-Fishsticks.jpeg",
    name: "   3 Fishsticks ",
    price: 36000,
    decription: "  3 Fishsticks ",
    group: "Snack",
  },
  {
    id: 37,
    img: "./assets/image/snack/2-Skewers.jpeg",
    name: " 2 Skewers ",
    price: 36000,
    decription: " 2 Skewers ",
    group: "Snack",
  },
  {
    id: 38,
    img: "./assets/image/dessert/1-eggtart.jpeg",
    name: " 1 Eggtart ",
    price: 18000,
    decription: "1 Eggtart ",
    group: "dessert",
  },
  {
    id: 39,
    img: "./assets/image/dessert/4-eggtart.jpeg",
    name: " 4 Eggtart ",
    price: 59000,
    decription: "4 Eggtart ",
    group: "dessert",
  },
  {
    id: 40,
    img: "./assets/image/dessert/2-Pumcheese.jpeg",
    name: " 2-Pumcheese",
    price: 18000,
    decription: "2-Pumcheese",
    group: "dessert",
  },
  {
    id: 41,
    img: "./assets/image/dessert/3-Pumcheese.jpeg",
    name: "   3 Pumcheese ",
    price: 18000,
    decription: "  3 Pumcheese ",
    group: "dessert",
  },
  {
    id: 42,
    img: "./assets/image/dessert/5-Pumcheese.jpeg",
    name: "   5 Pumcheese ",
    price: 18000,
    decription: "  5 Pumcheese ",
    group: "dessert",
  },
  {
    id: 43,
    img: "./assets/image/dessert/Pepsi-Can.jpeg",
    name: " Pepsi Can",
    price: 15000,
    decription: "1 Pepsi Can ",
    group: "dessert",
  },
  {
    id: 38,
    img: "./assets/image/dessert/7Up-Can.jpeg",
    name: " 7 UP Can ",
    price: 18000,
    decription: "7 UP Can ",
    group: "dessert",
  },
];

const quantity = document.querySelector(".quantity");

function numberWithCommas(x) {
  x = x.toString();
  var pattern = /(-?\d+)(\d{3})/;
  while (pattern.test(x)) x = x.replace(pattern, "$1,$2");
  return x;
}

function render({ id, img, name, price, decription }) {
  const item = `
                <div class="card newProduct-items">
                  <img src="${img}" class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">${name}</h5>
                    <div class="price">${numberWithCommas(price)}₫</div>
                    <p class="card-text">${decription}</p>
                    <button onClick="addToCart(${id})" class="btn btn-secondary"">Add</button>
                  </div>
                </div>
  `;
  return item;
}

function getFilter(productList, group) {
  const products = productList.filter((fil) => fil.group === group);
  const productEle2 = document.querySelector(`#${group} .newProduct-grid`);
  const content = taoSanPham(products);
  productEle2.innerHTML += content;
}
getFilter(newProduct, "New-Product");
getFilter(newProduct, "Combo-for-1");
getFilter(newProduct, "Combo-for-sharing");
getFilter(newProduct, "Fried");
getFilter(newProduct, "Rice");
getFilter(newProduct, "Snack");
getFilter(newProduct, "dessert");

function taoSanPham(productLis) {
  let content = "";
  for (let product of productLis) {
    content += render(product);
  }
  return content;
}

let listCart;

let cart = JSON.parse(localStorage.getItem("cart"));
if (cart) {
  listCart = cart;
} else {
  listCart = [];
}

let kkt = 0;
function addToCart(productId) {
  const cartItem = listCart.find((items) => items.id === productId);
  if (cartItem) {
    // !==undefind
    cartItem.quantity++;
  } else {
    const productItem = newProduct.find((product) => product.id === productId);
    listCart.push({ ...productItem, quantity: 1 });
  }
  for (let i = 0; i < listCart.length; i++) {
    if (listCart[i].id == productId) {
      listCart[i].quantity + 1;
    }
    localStorage.setItem("cart", JSON.stringify(listCart));
    let cart = JSON.parse(localStorage.getItem("cart"));
    if (cart) {
      quantity.innerHTML = cart.length;
    }
  }
}

function loadCartHome() {
  let cart = JSON.parse(localStorage.getItem("cart"));
  if (cart) {
    quantity.innerHTML = cart.length;
  }
}
